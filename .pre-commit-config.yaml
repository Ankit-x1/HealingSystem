"""
Pre-commit hooks for PhoenixDT code quality
"""

repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.5.0
    hooks:
      - id: trailing-whitespace
        name: Trim Trailing Whitespace
        description: This hook trims trailing whitespace.
        entry: trailing-whitespace-fixer
        language: system
        types: [text]
      - id: end-of-file-fixer
        name: Fix End of Files
        description: Ensures that a file is either empty or ends with a newline.
        entry: end-of-file-fixer
        language: system
        types: [text]
      - id: check-yaml
        name: Check Yaml
        description: This hook checks yaml files for syntax errors.
        entry: check-yaml
        language: system
        files: \.(yaml|yml)$
      - id: check-added-large-files
        name: Check for added large files
        description: Prevent giant files from being committed.
        entry: check-added-large-files
        language: system
        args: ['--maxkb=1000']
      - id: check-merge-conflict
        name: Check for merge conflicts
        description: Prevent merge conflicts.
        entry: check-merge-conflict
        language: system
      - id: debug-statements
        name: Debug Statements
        description: Check for debugger imports and py37+ method declarations.
        entry: debug-statements
        language: system

  - repo: https://github.com/psf/black
    rev: 24.8.0
    hooks:
      - id: black
        name: Black
        description: Format code with Black.
        entry: black
        language_version: python3
        args: [--line-length=88]
        files: ^src/.*\.py$

  - repo: https://github.com/pycqa/isort
    rev: 5.13.0
    hooks:
      - id: isort
        name: isort
        description: Sort imports with isort.
        entry: isort
        language_version: python3
        args: [--profile=black, --line-length=88]
        files: ^src/.*\.py$

  - repo: https://github.com/charliermarsh/ruff-pre-commit
    rev: v0.6.0
    hooks:
      - id: ruff
        name: Ruff
        description: Lint code with Ruff.
        entry: ruff
        args: [--fix, --exit-non-zero-on-fix]
        language_version: python3
        files: ^src/.*\.py$

  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.11.0
    hooks:
      - id: mypy
        name: MyPy
        description: Type check code with MyPy.
        entry: mypy
        language_version: python3
        args: [--ignore-missing-imports]
        files: ^src/.*\.py$

  - repo: https://github.com/pycqa/bandit
    rev: 1.7.5
    hooks:
      - id: bandit
        name: Bandit
        description: Find common security issues in Python code.
        entry: bandit
        args: [-r, src/, -f, json, -o, bandit-report.json]
        language_version: python3
        files: ^src/.*\.py$

  - repo: https://github.com/pyupio/py-security
    rev: 2.0.0
    hooks:
      - id: safety
        name: Safety
        description: Check for known security vulnerabilities.
        entry: safety
        args: [check, --json, --output, safety-report.json]
        language_version: python3
        files: ^requirements\.txt$